-- 卡密系统（支持一次性卡密和永久卡密），附带简单UI
local once_keys = { -- 一次性卡密
    ["ONCE-ABC123"] = true,
    ["ONCE-DEF456"] = true,
}
local perm_keys = { -- 永久卡密
    ["PERM-XYZ999"] = true,
    ["PERM-QWE888"] = true,
}
local used_once_keys = {}

-- 验证卡密函数
local function verifyKey(key)
    if perm_keys[key] then
        return true, "验证成功：永久卡密"
    elseif once_keys[key] and not used_once_keys[key] then
        used_once_keys[key] = true
        return true, "验证成功：一次性卡密"
    elseif used_once_keys[key] then
        return false, "该一次性卡密已被使用"
    else
        return false, "卡密无效"
    end
end

-- 创建UI界面
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "KAMI_Verify"
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 300, 0, 180)
Frame.Position = UDim2.new(0.5, -150, 0.4, -90)
Frame.BackgroundColor3 = Color3.fromRGB(40,40,40)
Frame.BorderSizePixel = 0
Frame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1,0,0,30)
Title.Position = UDim2.new(0,0,0,0)
Title.Text = "忍者注入器卡密验证"
Title.TextColor3 = Color3.fromRGB(255,255,255)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 22
Title.Parent = Frame

local Input = Instance.new("TextBox")
Input.Size = UDim2.new(0.8,0,0,35)
Input.Position = UDim2.new(0.1,0,0.3,0)
Input.PlaceholderText = "请输入卡密"
Input.Text = ""
Input.Font = Enum.Font.SourceSans
Input.TextSize = 18
Input.Parent = Frame

local Button = Instance.new("TextButton")
Button.Size = UDim2.new(0.8,0,0,35)
Button.Position = UDim2.new(0.1,0,0.55,0)
Button.Text = "验证卡密"
Button.Font = Enum.Font.SourceSansBold
Button.BackgroundColor3 = Color3.fromRGB(50,150,50)
Button.TextColor3 = Color3.fromRGB(255,255,255)
Button.TextSize = 18
Button.Parent = Frame

local Result = Instance.new("TextLabel")
Result.Size = UDim2.new(1,0,0,30)
Result.Position = UDim2.new(0,0,0.8,0)
Result.Text = ""
Result.TextColor3 = Color3.fromRGB(255,100,100)
Result.BackgroundTransparency = 1
Result.Font = Enum.Font.SourceSans
Result.TextSize = 18
Result.Parent = Frame

-- 按钮点击事件
Button.MouseButton1Click:Connect(function()
    local key = Input.Text
    local success, msg = verifyKey(key)
    Result.Text = msg
    if success then
        -- 卡密验证通过后执行你的主脚本逻辑
        -- 例如：loadstring(game:HttpGet("https://raw.githubusercontent.com/liuliuqiang404-code/-666/refs/heads/main/刘某脚本加载器"))()
        -- 或者调用你的主功能函数
    end
end)
